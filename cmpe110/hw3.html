<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <style>
/*--------------------------------------------------------------------------------------------- * Copyright (c) Microsoft Corporation. All rights reserved. * Licensed under the MIT License. See License.txt in the project root for license information. *--------------------------------------------------------------------------------------------*/ body { font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback"; font-size: 14px; padding: 0 12px; line-height: 22px; word-wrap: break-word; } body.scrollBeyondLastLine { margin-bottom: calc(100vh - 22px); } body.showEditorSelection .code-line { position: relative; } body.showEditorSelection .code-active-line:before, body.showEditorSelection .code-line:hover:before { content: ""; display: block; position: absolute; top: 0; left: -12px; height: 100%; } body.showEditorSelection li.code-active-line:before, body.showEditorSelection li.code-line:hover:before { left: -30px; } .vscode-light.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(0, 0, 0, 0.15); } .vscode-light.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(0, 0, 0, 0.40); } .vscode-dark.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 255, 255, 0.4); } .vscode-dark.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 255, 255, 0.60); } .vscode-high-contrast.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 160, 0, 0.7); } .vscode-high-contrast.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 160, 0, 1); } img { max-width: 100%; max-height: 100%; } a { color: #4080D0; text-decoration: none; } a:focus, input:focus, select:focus, textarea:focus { outline: 1px solid -webkit-focus-ring-color; outline-offset: -1px; } hr { border: 0; height: 2px; border-bottom: 2px solid; } h1 { padding-bottom: 0.3em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; } h1, h2, h3 { font-weight: normal; } h1 code, h2 code, h3 code, h4 code, h5 code, h6 code { font-size: inherit; line-height: auto; } a:hover { color: #4080D0; text-decoration: underline; } table { border-collapse: collapse; } table > thead > tr > th { text-align: left; border-bottom: 1px solid; } table > thead > tr > th, table > thead > tr > td, table > tbody > tr > th, table > tbody > tr > td { padding: 5px 10px; } table > tbody > tr + tr > td { border-top: 1px solid; } blockquote { margin: 0 7px 0 5px; padding: 0 16px 0 10px; border-left: 5px solid; } code { font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback"; font-size: 14px; line-height: 19px; } body.wordWrap pre { white-space: pre-wrap; } .mac code { font-size: 12px; line-height: 18px; } code > div { padding: 16px; border-radius: 3px; overflow: auto; } /** Theming */ .vscode-light { color: rgb(30, 30, 30); } .vscode-dark { color: #DDD; } .vscode-high-contrast { color: white; } .vscode-light code { color: #A31515; } .vscode-dark code { color: #D7BA7D; } .vscode-light code > div { background-color: rgba(220, 220, 220, 0.4); } .vscode-dark code > div { background-color: rgba(10, 10, 10, 0.4); } .vscode-high-contrast code > div { background-color: rgb(0, 0, 0); } .vscode-high-contrast h1 { border-color: rgb(0, 0, 0); } .vscode-light table > thead > tr > th { border-color: rgba(0, 0, 0, 0.69); } .vscode-dark table > thead > tr > th { border-color: rgba(255, 255, 255, 0.69); } .vscode-light h1, .vscode-light hr, .vscode-light table > tbody > tr + tr > td { border-color: rgba(0, 0, 0, 0.18); } .vscode-dark h1, .vscode-dark hr, .vscode-dark table > tbody > tr + tr > td { border-color: rgba(255, 255, 255, 0.18); } .vscode-light blockquote, .vscode-dark blockquote { background: rgba(127, 127, 127, 0.1); border-color: rgba(0, 122, 204, 0.5); } .vscode-high-contrast blockquote { background: transparent; border-color: #fff; }
</style>
<style>
/* Tomorrow Theme */ /* http://jmblog.github.com/color-themes-for-google-code-highlightjs */ /* Original theme - https://github.com/chriskempson/tomorrow-theme */ /* Tomorrow Comment */ .hljs-comment, .hljs-quote { color: #8e908c; } /* Tomorrow Red */ .hljs-variable, .hljs-template-variable, .hljs-tag, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-regexp, .hljs-deletion { color: #c82829; } /* Tomorrow Orange */ .hljs-number, .hljs-built_in, .hljs-builtin-name, .hljs-literal, .hljs-type, .hljs-params, .hljs-meta, .hljs-link { color: #f5871f; } /* Tomorrow Yellow */ .hljs-attribute { color: #eab700; } /* Tomorrow Green */ .hljs-string, .hljs-symbol, .hljs-bullet, .hljs-addition { color: #718c00; } /* Tomorrow Blue */ .hljs-title, .hljs-section { color: #4271ae; } /* Tomorrow Purple */ .hljs-keyword, .hljs-selector-tag { color: #8959a8; } .hljs { display: block; overflow-x: auto; color: #4d4d4c; padding: 0.5em; } .hljs-emphasis { font-style: italic; } .hljs-strong { font-weight: bold; }
</style>
<style>
ul.contains-task-list { padding-left: 0; } ul ul.contains-task-list { padding-left: 40px; } .task-list-item { list-style-type: none; } .task-list-item-checkbox { vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'HelveticaNeue-Light', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
    </head>
    <body>
        <h2 id="question-1-cache-mapping-and-overhead-24-points">Question 1. Cache Mapping and Overhead (24 Points)</h2>
<p>In this problem, we will explore the different cache mapping schemes, and analyse how they
impact hardware design choices. You are to design a 256-KByte byte addressable cache, with
16-word cachelines, with 4-Byte word size. The size of the address is 32-bits. Using these
values, you are to design the following.</p>
<h3 id="question-1a-direct-mapped-8-points">Question 1.A Direct Mapped (8 Points)</h3>
<p>Assume the cache is Direct Mapped. Using the information given to you, calculate the number of bits used for the offset, index, and tag, and fill the table below. Calculate the tag overhead, using 1 bit for Valid, and the number of bits you calculated for the tag.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Size(bits)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Offset</td>
<td>6</td>
</tr>
<tr>
<td>Index</td>
<td>12</td>
</tr>
<tr>
<td>Tag</td>
<td>14</td>
</tr>
</tbody>
</table>
<h3 id="question-1b-fully-associative-8-points">Question 1.B Fully-Associative (8 Points)</h3>
<p>Assume the cache is fully-associative. Using the information given to you, calculate the number of bits used for the offset, index, and tag, and fill the table below. Calculate the tag overhead, using 1 bit for Valid, and the number of bits you calculated for the tag.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Size(bits)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Offset</td>
<td>6</td>
</tr>
<tr>
<td>Index</td>
<td>0</td>
</tr>
<tr>
<td>Tag</td>
<td>26</td>
</tr>
</tbody>
</table>
<h3 id="question-1c-4-way-set-associative-8-points">Question 1.C 4-Way Set-Associative (8 Points)</h3>
<p>Assume the cache is 4-way set-associative. Using the information given to you, calculate the number of bits used for the offset, index, and tag, and fill the table below. Calculate the tag overhead, using 1 bit for Valid, and the number of bits you calculated for the tag.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Size(bits)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Offset</td>
<td>6</td>
</tr>
<tr>
<td>Index</td>
<td>10</td>
</tr>
<tr>
<td>Tag</td>
<td>16</td>
</tr>
</tbody>
</table>
<h2 id="question-2-cache-misses-and-latency-24-points">Question 2. Cache Misses and Latency (24 Points)</h2>
<table>
<thead>
<tr>
<th>Address</th>
<th>Instruction</th>
<th>Iteration 1</th>
<th>Iteration 2</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>loop:</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>0x108</td>
<td>addiu r1, r1, -1</td>
<td>compulsory</td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>0x11c</td>
<td>addiu r2, r2, 1</td>
<td>compulsory</td>
<td>conflict</td>
<td>1</td>
</tr>
<tr>
<td>0x110</td>
<td>j foo</td>
<td>conflict</td>
<td>conflict</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td>foo:</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>0x218</td>
<td>addiu r6, r6, 1</td>
<td>conflict</td>
<td>conflict</td>
<td>1</td>
</tr>
<tr>
<td>0x21c</td>
<td>bne r1, r0, loop</td>
<td>conflict</td>
<td>conflict</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Conflict happends 7 times, compulsory happens 2 times, capacity happens 0 times.</p>
<h2 id="question-2b-latency-10-points">Question 2.B Latency (10 Points)</h2>
<p>The cache will continually access the index 0 and 1. It's a thrashing on index 1. After the first iteration, it will continually conflict. Therefore, for 32 iterations, it will <code>31 * 4 + 3 = 127</code> conflict misses and <code>2</code> compulsory misses. It will take <code>(127 + 2) * 6 + 31 * 1 = 774 + 31 = 805</code> cycles.</p>
<p>The miss rate for 32 iterations is <code>(5 + 31 * 4) / (32 * 5) = 0.80625</code></p>
<p>The average instruction cache access latency is <code>805 / (32 * 5) = 5.03125</code></p>
<h2 id="question-3a-ideal-system-8-points">Question 3.A Ideal System (8 Points)</h2>
<p>Time for A: 1 / 3 * 1.5 = 0.5</p>
<p>Time for B: 2 / 4 = 0.5</p>
<p>Speedup = 1</p>
<h2 id="question-3b-full-system-8-points">Question 3.B Full system (8 Points)</h2>
<p>CPI A = 1 + (250 * 0.03 + 15) * (0.03 * 0.7 + 0.09 * 0.3) = 2.08</p>
<p>CPI B = 2 + (300 * 0.04 + 12) * (0.02 * 0.7 + 0.05 * 0.3) = 2.696</p>
<p>Time for A: 2.08 / 3 * 1.5 = 1.04</p>
<p>Time for B: 2.696 / 4 = 0.674</p>
<p>Speedup = 1.543</p>

    </body>
    </html>